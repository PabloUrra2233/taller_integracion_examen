{% extends 'catalogo/base.html' %}
{% load humanize %}

{% block title %}{{ producto.nombre }} - Librería{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-5 mb-4">
    <div class="card detalle-imagen">
      {% if producto.imagen %}
        <img src="{{ producto.imagen }}" class="img-fluid" alt="{{ producto.nombre }}">
      {% endif %}
    </div>
  </div>

  <div class="col-md-7">
    <h1 class="h3 mb-1">{{ producto.nombre }}</h1>
    <p class="text-muted mb-3">{{ producto.categoria.nombre }}</p>

    <p class="mb-4">
      {{ producto.descripcion }}
    </p>

    <p class="h4 mb-2">
      Precio actual: ${{ producto.precio|floatformat:0|intcomma }}
    </p>
    <p class="mb-4">
      Stock disponible: {{ producto.stock }}
    </p>

    <div class="card p-3">
      <h2 class="h5 mb-3">Editar atributos</h2>
      <form method="post">
        {% csrf_token %}

        <div class="mb-3">
          <label class="form-label">Nombre</label>
          {{ form.nombre }}
        </div>

        <div class="mb-3">
          <label class="form-label">Categoría</label>
          {{ form.categoria }}
        </div>

        <div class="mb-3">
          <label class="form-label">Precio</label>
          {{ form.precio }}
        </div>

        <div class="mb-3">
          <label class="form-label">Stock</label>
          {{ form.stock }}
        </div>

        <div class="mb-3">
          <label class="form-label">Descripción</label>
          {{ form.descripcion }}
        </div>

        <div class="mb-3">
          <label class="form-label">Imagen (URL)</label>
          {{ form.imagen }}
        </div>

        <button type="submit" class="btn btn-primary">Guardar cambios</button>
        <a href="{% url 'lista_productos' %}" class="btn btn-outline-secondary ms-2">
          Volver al catálogo
        </a>
      </form>

      <form method="post" action="{% url 'eliminar_producto' producto.id %}" class="mt-3">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger"
                onclick="return confirm('¿Seguro que quieres eliminar este producto?');">
          Eliminar producto
        </button>
      </form>
    </div>
  </div>
</div>
{% endblock %}
